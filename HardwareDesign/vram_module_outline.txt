VRAM module outline

The main idea of the VRAM module is that dual port static RAM works
more or less the same way as "normal" asynchronous single-port static RAM.
The only difference is that there are two independent interfaces to the memory,
consisting of an address bus, data bus, and control signals (chip select,
read/write, output enable.) One interface is used by the host system, the other
by the display controller.

The VRAM module has four ICS:

There are two IDT7134 dual port static RAM chips, serving as the lower 4KB
and upper 4KB of the video memory.

A 74ACT574 8 bit register, which is writable by host system, selects
which of the four 2KB banks of VRAM the host can access, and also selects
a font from the font ROM.

A GAL22V10 generates control signals for the dual port RAM and
the bank register.

The VRAM module has three general categories of signals.

The host interface signals include the host address bus (green),
host data bus (light blue), and host control signals (dark blue).

The rasterizer signals include the readout address (magenta) and
readout data (orange).

Finally, there are signals generated by the GAL, mostly control signals
for the static RAM and bank register, and signals generated by the
bank register.

The theory of operation of the VRAM module is fairly straightforward.

On the host side, the VRAM just looks like 2KB of memory in the window
$8800-$8FFF. Writing to the bank register, which is mapped at address
$80E0, chooses which 2K VRAM bank the host can access. The GAL uses the
upper 5 bits of the host address to determine when the VRAM window is being
accessed. It uses the host read and write strobes to determine whether an
access is a read or write. Based on this information, and the BankA12 signal
(which determines which VRAM chip is being accessed), the GAL generates
control signals (read/write, chip select, output enable) as appropriate.

On the display controller side, the VRAM module is even simpler. The
read/write input is tied to VCC, meaning that data is always read from
the VRAM, never written. (This makes sense because only the host system
should ever write data to VRAM.) The ReadoutA12 signal, and its inversion
generated by the GAL, is used to select one of the two dual port RAM
chips. The readout addresses are generated by the Readout module (to be
covered in the next video). Based on the readout address, one of the VRAM
chips will assert a data value onto the readout data bus. This is the
mechanism that the pixel generator will use to render pixels based on
character and attribute data in the VRAM.
